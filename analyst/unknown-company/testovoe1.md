# Тестовое1

## ЗАДАНИЕ

В настоящем задании, вы получаете доступ к набору данных о стоимости недвижимости в различных районах штата Калифорния, США.

Данные хранятся в реляционной БД в виде двух таблиц:

**neighborhoods** - случайная выборка районов штата Калифорния. Каждая строка таблицы представляет собой какой-то район, имеющий такие атрибуты, как:

* id - уникальный идентификатор, primary key;
* longitude - географическая долгота, град.;
* latitude - географическая широта, град.;
* median\_house\_value - медианная стоимость жилого дома в данном районе, доллар США;
* population - численность населения района, чел.;
* ocean\_proximity - кластер по принципу близости к океану, качественная переменная;

**cluster\_mean\_values** - каждая строка данной таблицы представляет собой кластер районов, сгруппированных по принципу близости к океану. Атрибуты:

* ocean\_proximity\_cluster - кластер по принципу близости к океану, качественная переменная;
* mean\_median\_house\_value - среднее значение медианной стоимости жилого дома во ВСЕХ районах данного кластера, доллар США;

{% hint style="warning" %}
**ОБРАТИТЕ ВНИМАНИЕ**: **mean\_median\_house\_value** - значение для всей генеральной совокупности районов в кластере. Таблица **neighborhoods**, в свою очередь, содержит только ВЫБОРКИ из каждого кластера, но не ген. совокупности. Если вы посчитаете среднее арифметическое **median\_house\_value** - это будет ВЫБОРОЧНЫМ значением.
{% endhint %}

***

### **ВАШИ ЗАДАЧИ**

1. Извлечь таблицу **neighborhoods** в датафрейм. В части записей отсутствуют данные в атрибуте **ocean\_proximity** (null-значения), их необходимо восстановить. Фактически, это задача классификации. Проведите разведочный анализ, подумайте, как в принципе её возможно решить;
2. &#x20;Исправить null-значения **ocean\_proximity** в самой БД. Условие: нельзя заменять таблицу в БД на новую, только через обновление значений с помощью SQL;
3. &#x20;С помощью SQL создать объединенный датасет со значениями из двух таблиц БД, т.е. чтобы у каждого района было известно среднее арифметическое медианной стоимости жилья для районов в его кластере. Условие: только с помощью SQL, не с помощью Python;
4. &#x20;Определить форму распределения **median\_house\_value** в каждом кластере. Определить выборочные средние **median\_house\_value** и их отклонения от средних ген. совокупностей. Все изобразить графически для каждого кластера. В виде комментария описать ваши выводы о репрезентативности выборок;
5. &#x20;Определить зависимость стоимости жилья от численности населения района в каждом кластере. Описать в виде комментария;

{% hint style="info" %}
Каждое задание необходимо сопроводить комментариями, в которых вы поясняете, чего конкретно добиваетесь и почему используете именно выбранный способ решения. Обоснуйте ваши действия и сформулируйте выводы.
{% endhint %}

***

{% tabs %}
{% tab title="установление соединения с БД" %}
{% code overflow="wrap" fullWidth="true" %}
```python
''' 
    Необходимо установить библиотеку SQLAlchemy, если она отсутствует в вашей среде. Смотрите документацию для вашей среды.
    Если вы используете PIP: pip install SQLAlchemy
    Если вы используете Anaconda: conda install -c anaconda sqlalchemy
'''

from sqlalchemy import create_engine

engine = create_engine('sqlite:///test_project.db')
```
{% endcode %}
{% endtab %}

{% tab title="Обращение к БД" %}
{% code overflow="wrap" fullWidth="true" %}
```python
#обращаться к БД можно с помощью pandas:

import pandas as pd

sql = #ваш запрос на SQL в виде строки
df = pd.read_sql(sql, engine)


#либо таким способом:

with engine.begin() as conn:
    sql = #ваш запрос на SQL в виде строки
    conn.execute(sql)
```
{% endcode %}
{% endtab %}
{% endtabs %}

***

### ТЕСТОВЫЕ ДАННЫЕ

{% file src="../../.gitbook/assets/test_project.db" %}
Файл базы данных
{% endfile %}
